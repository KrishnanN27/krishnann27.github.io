(()=>{if(window.__pomdLoaded)return;window.__pomdLoaded=!0;const e=e=>document.getElementById(e);function t(t){const s={time:e("pomd-time"),bar:e("pomd-bar"),toggle:e("pomd-toggle"),reset:e("pomd-reset"),skip:e("pomd-skip"),status:e("pomd-status"),phase:e("pomd-phase"),full:e("pomd-full"),card:t.querySelector(".pomd-card")},d=25*60*1e3;let n={running:!1,start:0,end:0,total:d,t:null};const m=e=>{const t=Math.max(0,Math.round(e/1e3)),n=Math.floor(t/60),s=t%60;return String(n).padStart(2,"0")+":"+String(s).padStart(2,"0")};function o(){const t=Date.now(),e=Math.max(0,n.end-t);s.time.textContent=m(e),s.bar.style.width=100*(1-e/n.total)+"%",s.status.textContent=n.running?"In progress":"Paused",s.toggle.textContent=n.running?"Pause":"Start",s.toggle.setAttribute("aria-pressed",String(n.running))}function u(){if(n.running)return;n.running=!0,(!n.start||Date.now()>=n.end)&&(n.start=Date.now(),n.end=n.start+n.total),g()}function i(){if(!n.running)return;n.running=!1,clearInterval(n.t),o()}function a(){clearInterval(n.t),n.running=!1,n.total=d,n.start=Date.now(),n.end=n.start+n.total,s.phase.textContent="Focus",s.status.textContent="Ready",o()}function r(){i(),s.status.textContent="Done!",s.phase.textContent="Break";try{const s=window.AudioContext||window.webkitAudioContext,e=new s,t=e.createOscillator(),n=e.createGain();t.type="sine",t.frequency.value=880,n.gain.setValueAtTime(1e-4,e.currentTime),n.gain.exponentialRampToValueAtTime(.25,e.currentTime+.02),n.gain.exponentialRampToValueAtTime(1e-4,e.currentTime+.6),t.connect(n).connect(e.destination),t.start(),t.stop(e.currentTime+.65)}catch{}}function g(){clearInterval(n.t),n.t=setInterval(()=>{Date.now()>=n.end&&(r(),clearInterval(n.t)),o()},250)}const h=()=>document.fullscreenElement===s.card||document.webkitFullscreenElement===s.card,p=()=>s.card.requestFullscreen?s.card.requestFullscreen():s.card.webkitRequestFullscreen&&s.card.webkitRequestFullscreen(),f=()=>document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),l=()=>h()?f():p(),c=()=>{s.full&&(s.full.textContent=h()?"Exit full screen":"Full screen")};s.toggle.addEventListener("click",()=>n.running?i():u()),s.reset.addEventListener("click",a),s.skip.addEventListener("click",r),s.full&&s.full.addEventListener("click",l),document.addEventListener("fullscreenchange",c),document.addEventListener("webkitfullscreenchange",c),window.addEventListener("keydown",e=>{e.code==="Space"&&(e.preventDefault(),n.running?i():u()),(e.key==="r"||e.key==="R")&&a(),(e.key==="s"||e.key==="S")&&r(),(e.key==="f"||e.key==="F")&&l()}),a(),c()}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-pomd]").forEach(t)})})()